<!DOCTYPE html>

<html lang="en"> 
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel="stylesheet" href="style.css" media="screen,projection">

		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

		<script type="text/javascript" src="js-cookie.js"></script>

		<link href="https://fonts.googleapis.com/css?family=Roboto:300,700" rel="stylesheet">

		<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
		<link rel="manifest" href="/favicons/manifest.json">
		<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#212121">
		<meta name="theme-color" content="#212121">
		
		<!-- Google tag (gtag.js) -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-3CL8WF78LD"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'G-3CL8WF78LD');
		</script>
		
	</head>

	<body>

		<main>
			<div class="full-div flex flex-center">
				<div class="valign">
					<div class="row" id="magic-container">
						<h1 class="center" id="title">
							<span id="title-0">Where</span>
							<span id="title-1">The</span>
							<span id="title-2">Fuck</span>
							<span id="title-3">Is</span>
							<span id="title-4">Our</span>
							<span id="title-5">Kit</span><span id="title-6">?</span>
						</h1>

						<div class="center" id="where-is-it">.</div>
						<div class="center" id="the-excuse">.</div>
					</div>	
				</div>
			</div>
		</main>

		<footer>
			<div class="footer flex flex-center valign">
				<span>Stressed about all the kit we've lost? Have you tried</span>&nbsp;
				<a href="http://www.decisionproblem.com/paperclips/">paperclips?</a>
			</div>
		</footer>

	</body>

	<script type="text/javascript">
		let animate_time = 600

		let title_animate_time = 700
		let title_animate_delay = 130

		let container = $('#magic-container')
		let where_container = $('#where-is-it')
		let excuse_container = $('#the-excuse')

		let places=['Under the bins', 'Left on a job', 'Eaten', 'Someone\'s house', 'Accidentally gave it to the client', 'What kit? I haven\'t seen any kit', 'Really? Again?', 'Oh that, we lost that months ago', 'Why are you asking me for help?', 'It\'s in broken bits', 'In the van?', 'In the theatre', 'Relax, I\'m sure it\'ll turn up soon', 'Where you last had it', 'I\'m sure it will magically appear', 'Try calling it', 'The PO book drawer', 'In the corridore', 'Kit? Just go to the pub', 'With the e-stop key']

		let excuses=['I thought I told someone', 'Have you tried forgetting about it?', 'We can always buy another one', 'Have you tried turning it off and on again?', 'Just pretend nothing happend', 'It has a label on it though', 'It\'s not the end of the world', 'Just think faster', 'Pub?', 'Just ask a volunteer to find it']

		$(document).ready(function(){
			var done_title_animation = Cookies.get('done_title_animation')

			if (done_title_animation) {
				animateReasons()
			} else {
				Cookies.set('done_title_animation', true, { expires: 1 })
				animateTitle();

				setTimeout(function() {
					animateReasons();
				}, title_animate_delay * $('#title span').length + title_animate_time / 2);

			}
		});

		function animateTitle() {
			let sectionContainer = '#title-'

			$('#title span').each(function(i) {
				$(sectionContainer + i).css('opacity', 0);
			});

			$('#title span').each(function(i) {
				$(sectionContainer + i).css('opacity', 0).delay(i * title_animate_delay).animate({
					opacity: 1
				}, title_animate_time);
			});	
		};

		function animateReasons() {
			var rand_place = places[Math.floor(Math.random() * places.length)];
			var rand_excuse = excuses[Math.floor(Math.random() * excuses.length)];

			where_container.html(rand_place + ' ...').animate({
				opacity: 1,
			}, animate_time, function() {

				excuse_container.html(rand_excuse).animate({
					opacity: 0.8,
				}, animate_time);

			});
		};

	</script>
</html>
